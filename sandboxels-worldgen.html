<!DOCTYPE html>
<html lang="en">
	<head>
		<title>an orbit's cool web page</title>
		<meta property="og:site_name" content="orbit-loona.github.io" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="Sandboxels worldgen documentation" />
		<meta property="og:url" content="https://orbit-loona.github.io/sandboxels-worldgen.html" />
		<meta property="og:description" content="A description of the rabbit hole that is Sandboxels's worldgen system." />
		<meta property="og:locale" content="en_US" />
		<meta property="og:image" content="https://orbit-loona.github.io/bin/ot12.png" />
		<meta property="og:image:width" content="173" />
		<meta property="og:image:height" content="130" />
		<meta property="og:image:alt" content="Loona OT12" />
		<meta name="twitter:image:src" content="https://orbit-loona.github.io/bin/ot12.png" />
		<meta name="twitter:title" content="Sandboxels worldgen documentation" />
		<meta name="twitter:description" content="A description of the rabbit hole that is Sandboxels's worldgen system." />
		<link rel="stylesheet" href="main.css"/>
		<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="An Orbit">
		<meta charset="UTF-8">
		<style>
			code, pre {
				font-family: "Comic Mono";
			}
			
			/*
			img {
				border: 1px solid white;
			}

			img:focus {
				border: 2px solid yellow;
			}
			*/
			
			figure {
				display:table;
				border: 1px solid white;
			}

			figure img {
				border: 1px solid #ffffff7f;
			}
			
			figure img:focus {
				border: 2px solid yellow;
			}
			
			figcaption {
				width: 250px;
				word-wrap: normal;
				font-size: 80%;
				text-align: center;
			}
			
			figcaption.expanded {
				width: 100%;
				max-width: 1000px;
				word-wrap: normal;
				font-size: 80%;
				text-align: center;
			}
			
			img.expanded {
				width: unset;
				height: unset;
			}

			.images {
				display: flex;
				flex-wrap: wrap;
				padding-left: 0;
			}

			.images figure {
				flex: 0 0;
			}
		</style>
		<script>
			function getSiblingNodes(element,returnArray=true) {
				var siblings = element.parentElement.childNodes;
				return returnArray ? Array.from(siblings) : siblings;
			};
		
			function toggleClass(element,className) {
				var cl = element.classList;
				cl.contains(className) ? cl.remove(className) : cl.add(className);
			};
			
			function expandOnclick(element) {
				var siblings = getSiblingNodes(element,true);
				toggleClass(siblings[0],"expanded");
				var firstSiblingIsExpanded = siblings[0].classList.contains("expanded");
				var method = firstSiblingIsExpanded ? "add" : "remove";
				for(var i in siblings) {
					siblings[i].classList[method]("expanded");
				};
			};
		</script>
	</head>
	<body>
		<div id="main">
			<h1>Sandboxels worldgen</h1>
			<p><span>This page aims to describe how Sandboxels defines worldgen presets. This system is really complicated and I think I'll end up dying before this is completed.</span></p>

			<h2>Terminology</h2>
			<p>
				<span><em>Real number</em>: A number that may have a decimal, such as <code class="rounded">0.1</code> or <code class="rounded">36.7</code>.</span><br/>
				<span><em>Integer</em>: A number without a decimal, such as <code class="rounded">0</code> or <code class="rounded">12</code>.</span>
			</p>

			<h1><code class="rounded">baseHeight</code></h1>
			<p><span><code class="rounded">baseHeight</code> is a real number that nominally defines the height of the world's bottom relative to the height of the canvas. The default value is 0.5, which is assumed if it is not specified (due to how this is checked, a value of <code class="rounded">0</code> is treated as an unspecified value and 0.5 is used.</span></br>
			At values below 0.5, this shifts the world downwards. At values above 0.5, it begins to squish the world up vertically.</p>
			<div class="images" id="baseHeightImages">
				<figure><img src="worldgen/baseHeight 0.png" alt="A grass world with its baseHeight set to 0.000001, with only a few pixels of grass." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with baseHeight 0.000001</figcaption></figure>
				<figure><img src="worldgen/baseHeight 0.25.png" alt="A grass world with its baseHeight set to 0.25, with the grass and some of the dirt generated." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with baseHeight 0.25</figcaption></figure>
				<figure><img src="worldgen/baseHeight 0.5.png" alt="A grass world with its baseHeight set to 0.5, showing normal terrain generation." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with baseHeight 0.5</figcaption></figure>
				<figure><img src="worldgen/baseHeight 0.75.png" alt="A grass world with its baseHeight set to 0.75, showing generation roughly squished into the second fourth down from the top of the canvas." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with baseHeight 0.75</figcaption></figure>
				<figure><img src="worldgen/baseHeight 1.png" alt="A grass world with its baseHeight set to 1, showing the entire terrain squished into a few sparse places in the upper 2 pixels of the screen." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with baseHeight 1</figcaption></figure>
				<figure><img src="worldgen/baseHeight 0.03 with gold.png" alt="A grass world with its baseHeight set to 0.03 and a 1 pixel layer of gold added, showing that baseHeight's behavior at or below 0.5 is probably a shift down and not a stretch down." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with baseHeight 0.03 and gold layer added</figcaption></figure>
			</div>
		</div>

		<script>
			document.body.addEventListener('keydown', function (e) {
				if([" ","Enter"].includes(e.key) && document.activeElement.tagName.toLowerCase() == "img") {
					toggleClass(document.activeElement,"expanded");
				};
			});
		</script>

			<h1>Layers</h1>
			<p>
				<span>TODO: layers</span><br/>
				<span>My perception of time is off by a factor greater than fucking 4 again, so I have to go.</span>
			</p>

		<!--
			* `layers`: An array describing the world preset's layers.
				- Layers are listed topmost first.
				- The `layers` object is an array of arrays, each of the format [`float`, `string`] or [`float`, `string`, `float`].
				- The first item (hereafter `bottom`†, a decimal number between 0 and 1) defines the lowest position, relative to the vertical midpoint of the canvas, above which the layer's element will be placed.
					~ If the bottom value is 0, it will be changed to a random negative number on world generation, which is visible if `baseHeight` is changed.
					~ A bottom value of 1 indicates the midpoint, and a value of 0 indicates the bottom of the canvas.
					~ A *bottom* value of 0.5 will define a section extending from {1/4 above the bottom of the canvas} to {either the vertical midpoint or the *bottom* value of the next highest (or with how layers are defined, the previous) layer}.
					~ Layers must be defined from highest world position (highest *bottom* value) first. Otherwise, the out-of-order layer will override the layers after it. See Addendum 1.
					~ If two layers have the same decimal, the one that is defined first (higher) will apply except in certain cases related to a "chance" value less than 1 (see below and Addendum 1).
				- The second item ("a string) is the name of the element that will generate.
					~ This value cannot be an array, and nonexistent elements are ignored.
				- The third item (also a decimal) is the chance of a pixel being placed, from 0 meaning "never" to 1 meaning "always".
					~ If it is absent, the value is assumed to be 1.
						< Due to how this check is implemented, a third value

			† The only layer value that is given a name in the code is the second value (`element`). The others are only referred to by their indices as `layer[0]` and `layer[2]`.
		-->
		<br/><br/><a href="index.html"><small>go to main page</small></a>
	</body>
</html>