<!DOCTYPE html>
<html lang="en">
	<head>
		<title>an orbit's cool web page</title>
		<meta property="og:site_name" content="orbit-loona.github.io" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="Unofficial Sandboxels worldgen documentation" />
		<meta property="og:url" content="https://orbit-loona.github.io/sandboxels-worldgen.html" />
		<meta property="og:description" content="A description of the rabbit hole that is Sandboxels's worldgen system." />
		<meta property="og:locale" content="en_US" />
		<meta property="og:image" content="https://orbit-loona.github.io/bin/ot12.png" />
		<meta property="og:image:width" content="173" />
		<meta property="og:image:height" content="130" />
		<meta property="og:image:alt" content="Loona OT12" />
		<meta name="twitter:image:src" content="https://orbit-loona.github.io/bin/ot12.png" />
		<meta name="twitter:title" content="Unofficial Sandboxels worldgen documentation" />
		<meta name="twitter:description" content="A description of the rabbit hole that is Sandboxels's worldgen system." />
		<link rel="stylesheet" href="main.css"/>
		<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="An Orbit">
		<meta charset="UTF-8">
		<style>
			code, pre {
				font-family: "Comic Mono";
			}
			
			/*
			img {
				border: 1px solid white;
			}

			img:focus {
				border: 2px solid yellow;
			}
			*/
			
			figure {
				display:table;
				border: 1px solid white;
			}

			figure img {
				border: 1px solid #ffffff7f;
			}
			
			figure img:focus {
				border: 2px solid yellow;
			}
			
			figcaption {
				width: 250px;
				word-wrap: normal;
				font-size: 80%;
				text-align: center;
			}
			
			figcaption.expanded {
				width: 100%;
				max-width: 1000px;
				word-wrap: normal;
				font-size: 80%;
				text-align: center;
			}
			
			img.expanded {
				width: unset;
				height: unset;
			}

			.images {
				display: flex;
				flex-wrap: wrap;
				padding-left: 0;
			}

			.images figure {
				flex: 0 0;
			}
			
			a.footnote, a.footnote:visited {
				text-decoration: underline;
				color: #0ff;
			}

			:target {
				background-color: #ffff002f;
				border: 1px solid yellow;
			}
			
			:target .rounded {
				background: #550;
			}
			
			.baseHeight, .baseHeight:visited {
				color: #aff;
			}
		</style>
		<script>
			function getSiblingNodes(element,returnArray=true) {
				var siblings = element.parentElement.childNodes;
				return returnArray ? Array.from(siblings) : siblings;
			};
		
			function toggleClass(element,className) {
				var cl = element.classList;
				cl.contains(className) ? cl.remove(className) : cl.add(className);
			};
			
			function expandOnclick(element) {
				var siblings = getSiblingNodes(element,true);
				toggleClass(siblings[0],"expanded");
				var firstSiblingIsExpanded = siblings[0].classList.contains("expanded");
				var method = firstSiblingIsExpanded ? "add" : "remove";
				for(var i in siblings) {
					siblings[i].classList[method]("expanded");
				};
			};
		</script>
	</head>
	<body>
		<div id="main">
			<!--maybe you're not supposed to raw-dog HTML like this-->
			<h1>Sandboxels worldgen</h1>
			<p><span>This page aims to describe how Sandboxels defines worldgen presets. This system is really complicated.</span></p>

			<h2>Terminology</h2>
			<p>
				<span><em>Real number</em>: A number that may have a decimal, such as <code class="rounded">0.1</code> or <code class="rounded">36.7</code>.</span><br/>
				<span><em>Integer</em>: A number without a decimal, such as <code class="rounded">0</code> or <code class="rounded">12</code>.</span>
			</p>

			<h1 id="baseHeight"><code class="rounded baseHeight">baseHeight</code></h1>
			<p>
				<span><code class="rounded baseHeight">baseHeight</code> is a real number that nominally defines the height of the world's bottom relative to the height of the canvas. The default value is 0.5, which is assumed if it is not specified (due to how this is checked, a value of <code class="rounded">0</code> is treated as an unspecified value and 0.5 is used.</span></br>
				<s>At values below 0.5, this shifts the world downwards. At values above 0.5, it begins to squish the world up vertically.</s>
			</p>
			<div class="images" id="baseHeightImages">
				<figure><img src="worldgen/baseHeight 0.png" alt="A grass world with its baseHeight set to 0.000001, with only a few pixels of grass." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with <code class="rounded baseHeight">baseHeight</code> 0.000001</figcaption></figure>
				<figure><img src="worldgen/baseHeight 0.25.png" alt="A grass world with its baseHeight set to 0.25, with the grass and some of the dirt generated." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with <code class="rounded baseHeight">baseHeight</code> 0.25</figcaption></figure>
				<figure><img src="worldgen/baseHeight 0.5.png" alt="A grass world with its baseHeight set to 0.5, showing normal terrain generation." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with <code class="rounded baseHeight">baseHeight</code> 0.5</figcaption></figure>
				<figure><img src="worldgen/baseHeight 0.75.png" alt="A grass world with its baseHeight set to 0.75, showing generation roughly squished into the second fourth down from the top of the canvas." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with <code class="rounded baseHeight">baseHeight</code> 0.75</figcaption></figure>
				<figure><img src="worldgen/baseHeight 1.png" alt="A grass world with its baseHeight set to 1, showing the entire terrain squished into a few sparse places in the upper 2 pixels of the screen." tabindex=0 onclick="expandOnclick(this)"width="250" height="125"/><figcaption>Grass world with <code class="rounded baseHeight">baseHeight</code> 1</figcaption></figure>
			</div>

			<br/><h1 id="layers"><code class="rounded">layers</code></h1>
			<p>
				<span><code class="rounded">layers</code> is an array of arrays that describes the worldgen preset's layers and elements. Each array is of the format <code class="rounded">[<em class="layersBottom heejin">real number</em>, <em class="layersElement hyunjin">string</em>]</code> or <code class="rounded">[<em class="layersBottom heejin">real number</em>, <em class="layersBottom hyunjin">string</em>, <em class="layersChance yeojin">real number</em>]</code>.
				
				<h2 class="layersBottom heejin" id="layersBottom">First argument</h2>
				<p>
				<br/>For instance, a <code class="rounded layersBottom heejin">bottom</code> value of 0.5 will define a section extending, assuming a <code class="rounded"><a href="#baseHeight" class="baseHeight">baseHeight</a></code> of 0.5, from {1/4 above the bottom of the canvas} to {either the vertical midpoint or the <code class="rounded layersBottom heejin">bottom</code> value of the next highest (i.e. the previous) layer}.
				The first item (hereafter <code class="rounded layersBottom heejin">bottom</code><sup><a href="#footnote-1" class="footnote">1</a></sup>) is a number, usually between 0 and 1. &nbsp; <code class="rounded layersBottom heejin">bottom</code> defines the bottom start of the layer, or the lowest position (relative to the vertical midpoint of the canvas) above which the layer's element will be placed. &nbsp; If the <code class="rounded layersBottom heejin">bottom</code> value is 0, it will be changed to a random negative number on world generation.
				<br/>Layers are listed topmost first, with descending <code class="rounded layersBottom heejin">bottom</code> values. &nbsp; Any layers deviating from this order will override the layers after them.
				<br/>A <code class="rounded layersBottom heejin">bottom</code> value of 1 indicates the midpoint, and a value of 0 indicates the bottom of the canvas. &nbsp; Values below 0 will try to generate pixels below the canvas. &nbsp; Though these pixels do not generate because of the canvas edge, a negative value helps to fill in gaps at the bottom of the world caused by random offsets. &nbsp; The extra material generated below the world will also generated (albeit compressed vertically) if <code class="rounded"><a href="#baseHeight" class="baseHeight">baseHeight</a></code> is greater than <code class="rounded">0.5</code>.
				<br/>If two layers have the same decimal, the one that is defined first (higher) will apply except in certain cases related to a <code class="rounded layersChance yeojin"><a href="#layersChance" class="yeojin">chance</a></code> value less than 1.

				<h2 class="layersElement hyunjin" id="layersElement">Second argument</h2>
				<p>
				The second item (hereafter <code class="rounded layersElement hyunjin">element</code>) is a string. This value defines the element (such as <code class="rounded layersElement hyunjin">"dirt"</code> or <code class="rounded layersElement hyunjin">"iron"</code>) that comprises the layer.
				<br/><code class="rounded layersElement hyunjin">element</code> cannot be an array of element names. Elements that do not exist in the game will be ignored.

			</p>
			<div class="images" id="layersImages">

			</div>
		</div>

		<br/><div id="footnotes">
			<ol>
				<li><span id="footnote-1">The only layer value that is given a name in the code is the second value (<code class="rounded layersElement hyunjin">element</code>). The others are only referred to by their indices as <code class="rounded layersBottom heejin">layer[0]</code> and <code class="rounded layersChance yeojin">layer[2]</code>.</span></li>
			</ol>
		</div>

		<script>
			document.body.addEventListener('keydown', function (e) {
				if([" ","Enter"].includes(e.key) && document.activeElement.tagName.toLowerCase() == "img") {
					toggleClass(document.activeElement,"expanded");
				};
			});
		</script>

		<!--
			* `layers`: An array describing the world preset's layers.
				- The second item ("a string) is the name of the element that will generate.
					~ This value cannot be an array, and nonexistent elements are ignored.
				- The third item (also a decimal) is the chance of a pixel being placed, from 0 meaning "never" to 1 meaning "always".
					~ If it is absent, the value is assumed to be 1.
						< Due to how this check is implemented, a third value
		-->
		<br/><br/><a href="index.html"><small>go to main page</small></a>
	</body>
</html>
